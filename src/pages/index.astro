---
import type { Lang } from '@/i18n';
import { t, getBaseUrl } from '@/i18n';
import BaseLayout from '@/layouts/BaseLayout.astro';

import CtaFaq from '@/components/CtaFaq.astro';
import Faq from '@/components/Faq.astro';

const lang: Lang = 'ru';
const base = getBaseUrl(lang);

const partners = [
  { name: "Газпром", logo: "/img/partners/gazprom.png" },
  { name: "Татнефть", logo: "/img/partners/tatneft.png" },
  { name: "Уральская Сталь", logo: "/img/partners/ural_steel.png" },
  { name: "УРАЛХИМ", logo: "/img/partners/uralchem.png" },
  { name: "Северсталь", logo: "/img/partners/severstal.png" },
  { name: "СИБУР", logo: "/img/partners/sibur.png" },
  { name: "Роснефть", logo: "/img/partners/rosneft.png" },
  { name: "Segezha Group", logo: "/img/partners/segezha.png" },
  { name: "ЕвроХим", logo: "/img/partners/Evrohim.svg" },
  { name: "Лукойл", logo: "/img/partners/LUK_OIL.svg" },
  { name: "НЛМК", logo: "/img/partners/NLMK.svg" },
  { name: "Губахинский Кокс", logo: "/img/partners/Gubahinskiy Koks.svg" }
];

const faqItems = [
  {
    question: "Почему стоит выбрать РУСТРЕЙД для поставки турбин?",
    answer: "Мы предлагаем комплексный подход: от проектирования до шеф-монтажа. Наше оборудование сочетает в себе надежность, высокую эффективность и доступную стоимость, являясь отличной альтернативой европейским аналогам."
  },
  {
    question: "В какие регионы осуществляется поставка?",
    answer: "Мы работаем по всей территории России и странам СНГ. Наша логистическая служба обеспечивает безопасную и своевременную доставку крупногабаритного энергетического оборудования в любую точку."
  },
  {
    question: "Каковы средние сроки реализации проекта?",
    answer: "Сроки зависят от сложности задачи. Стандартная поставка комплектующих занимает от 2 недель. Производство и поставка турбогенераторной установки «под ключ» обычно занимает от 6 до 12 месяцев."
  },
  {
    question: "Предоставляете ли вы сервисное обслуживание?",
    answer: "Да, мы обеспечиваем гарантийное и постгарантийное обслуживание, поставку запасных частей и проведение плановых ремонтов для всего спектра поставляемого оборудования."
  }
];
---

<BaseLayout 
  lang={lang} 
  keywords="паровые турбины, энергетическое оборудование, турбогенераторы, РУСТРЕЙД"
>
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1>{t('hero.title', lang)}</h1>
      <p>{t('hero.description', lang)}</p>
      <div class="hero-buttons">
        <a href={`${base}/cases`} class="btn btn-cases">
          <img src="/img/arrow_right.svg" alt="" width="16" height="16" class="icon-dark" />
          <span>{t('hero.cta', lang)}</span>
        </a>
        <button class="btn btn-accent" data-modal="contact">
          <span>{t('hero.ctaSecondary', lang)}</span>
          <img src="/img/settings.svg" alt="" width="16" height="16" />
        </button>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section class="services-section">
    <div class="block-header">
      <a href={`${base}/turbines`}>
        <h2>
          {t('services.title', lang)}
          <img src="/img/main/arrow_circle_diagonal.svg" alt="" width="24" height="24" />
        </h2>
      </a>
      <p>{t('services.description', lang)}</p>
    </div>

    <div class="services-cards">
      <a class="service-card" href={`${base}/turbines/drive`}>
        <div class="service-card-icon">
          <img src="/img/main/service_circles.svg" alt="" width="32" height="32" />
        </div>
        <div class="service-card-content">
          <h4>{t('turbines.drive', lang)}</h4>
          <p>{t('turbines.driveDesc', lang)}</p>
        </div>
        <div class="service-card-arrow">
          <img src="/img/main/black_arrow_diagonal.svg" alt="" width="24" height="24" />
        </div>
        <img class="service-card-bg" src="/img/main/priv_turbine.webp" alt="" />
      </a>

      <a class="service-card" href={`${base}/turbines/low-power`}>
        <div class="service-card-icon">
          <img src="/img/main/service_atom.svg" alt="" width="32" height="32" />
        </div>
        <div class="service-card-content">
          <h4>{t('turbines.lowPower', lang)}</h4>
          <p>{t('turbines.lowPowerDesc', lang)}</p>
        </div>
        <div class="service-card-arrow">
          <img src="/img/main/black_arrow_diagonal.svg" alt="" width="24" height="24" />
        </div>
        <img class="service-card-bg" src="/img/main/low_turbine.webp" alt="" />
      </a>

      <a class="service-card" href={`${base}/turbines/condensing`}>
        <div class="service-card-icon">
          <img src="/img/main/service_regular.svg" alt="" width="32" height="32" />
        </div>
        <div class="service-card-content">
          <h4>{t('turbines.optimal', lang)}</h4>
          <p>{t('turbines.condensingDesc', lang)}</p>
        </div>
        <div class="service-card-arrow">
          <img src="/img/main/black_arrow_diagonal.svg" alt="" width="24" height="24" />
        </div>
        <img class="service-card-bg" src="/img/main/usual_turbine.webp" alt="" />
      </a>
    </div>
  </section>

  <!-- Service Kinds Section -->
  <section class="service-kinds">
    <div class="service-kind-card">
      <div class="service-kind-header">
        <img src="/img/main/kinds/build.svg" alt="" width="32" height="32" />
        <h3>{t('services.design', lang)}</h3>
      </div>
      <p>{t('services.designDesc', lang)}</p>
    </div>

    <div class="service-kind-card">
      <div class="service-kind-header">
        <img src="/img/main/kinds/rkd.svg" alt="" width="32" height="32" />
        <h3>{t('services.rkd', lang)}</h3>
      </div>
      <p>{t('services.rkdDesc', lang)}</p>
    </div>

    <div class="service-kind-card">
      <div class="service-kind-header">
        <img src="/img/main/kinds/cert.svg" alt="" width="32" height="32" />
        <h3>{t('services.cert', lang)}</h3>
      </div>
      <p>{t('services.certDesc', lang)}</p>
    </div>

    <div class="service-kind-card">
      <div class="service-kind-header">
        <img src="/img/main/kinds/delivery.svg" alt="" width="32" height="32" />
        <h3>{t('services.delivery', lang)}</h3>
      </div>
      <p>{t('services.deliveryDesc', lang)}</p>
    </div>

    <div class="service-kind-card">
      <div class="service-kind-header">
        <img src="/img/main/kinds/chief.svg" alt="" width="32" height="32" />
        <h3>{t('services.chief', lang)}</h3>
      </div>
      <p>{t('services.chiefDesc', lang)}</p>
    </div>
  </section>

  <!-- Partners Marquee Section -->
  <section class="partners-section">
    <div class="block-header">
      <h2>Нам доверяют</h2>
    </div>
    
    <div class="marquee-container">
      <div class="marquee-track">
        {/* First set of partners */}
        {partners.map(partner => (
          <div class="partner-item">
            <div class="partner-logo">
              <img src={partner.logo} alt={partner.name} />
            </div>
          </div>
        ))}
        {/* Duplicate set for seamless loop */}
        {partners.map(partner => (
          <div class="partner-item">
            <div class="partner-logo">
              <img src={partner.logo} alt={partner.name} />
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <Faq items={faqItems} />

  <CtaFaq />
</BaseLayout>

<style>
  /* Hero Section */
  .hero {
    background: linear-gradient(59deg, rgba(42, 45, 46, 0.70) 0%, rgba(0, 0, 0, 0.40) 31.59%, rgba(42, 45, 46, 0.70) 100%), 
                url('/img/main/main.webp') center/cover no-repeat;
    border-radius: var(--radius-xl);
    padding: var(--space-12) var(--space-8);
    margin-bottom: var(--space-8);
    min-height: 400px;
    display: flex;
    align-items: center;
  }

  .hero-content { max-width: 600px; color: var(--color-white); }
  .hero h1 { font-size: clamp(28px, 5vw, 40px); color: var(--color-white); margin-bottom: var(--space-4); letter-spacing: -2px; }
  .hero p { font-size: var(--text-lg); opacity: 0.9; margin-bottom: var(--space-6); line-height: 1.6; }
  .hero-buttons { display: flex; flex-wrap: wrap; gap: var(--space-3); }
  .hero-buttons .btn { display: inline-flex; align-items: center; gap: var(--space-2); }
  .hero-buttons .btn-cases { 
    background: #A3DAF3; 
    color: #1a1a1a; 
    border: none;
  }
  .hero-buttons .btn-cases:hover { 
    background: #8ECFE8;
    box-shadow: 0 4px 15px rgba(163, 218, 243, 0.4);
  }
  .hero-buttons .btn-cases .icon-dark {
    filter: brightness(0);
  }

  .block-header { margin-bottom: var(--space-6); }
  .block-header a { display: inline-block; }
  .block-header h2 { display: inline-flex; align-items: center; gap: var(--space-2); font-size: var(--text-3xl); margin-bottom: var(--space-3); }
  .block-header h2 img { transition: transform var(--transition-base); }
  .block-header a:hover h2 img { transform: translate(4px, -4px); }
  .block-header p { color: var(--color-text-muted); max-width: 600px; }

  .services-section { margin-bottom: var(--space-8); }
  .services-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-4); }
  .service-card { 
    position: relative; 
    display: flex; 
    flex-direction: column; 
    padding: var(--space-5); 
    padding-top: 260px;
    background: var(--color-white); 
    border: 1px solid var(--color-border); 
    border-radius: var(--radius-lg); 
    overflow: hidden; 
    transition: all var(--transition-base); 
    min-height: 400px; 
  }
  .service-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
  .service-card-icon { 
    position: absolute;
    top: var(--space-4);
    left: var(--space-5);
    z-index: 2;
    width: 80px;
    height: 80px;
    background: var(--color-white);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  .service-card-icon img {
    width: 56px;
    height: 56px;
  }
  .service-card-content { 
    flex: 1; 
    position: relative;
    z-index: 2;
    margin-top: auto;
    padding-top: var(--space-4);
  }
  .service-card-content h4 { font-size: var(--text-lg); margin-bottom: var(--space-2); }
  .service-card-content p { color: var(--color-text-muted); font-size: var(--text-base); }
  .service-card-arrow { 
    position: absolute; 
    top: var(--space-4); 
    right: var(--space-5); 
    z-index: 2;
    opacity: 0; 
    transform: translate(-10px, 10px); 
    transition: all var(--transition-base); 
  }
  .service-card:hover .service-card-arrow { opacity: 1; transform: translate(0, 0); }
  .service-card-bg { 
    position: absolute; 
    top: 0; 
    right: 0; 
    width: 100%; 
    height: 250px; 
    object-fit: contain;
    object-position: right bottom;
    opacity: 0.9; 
    transition: all var(--transition-base); 
  }
  .service-card:hover .service-card-bg { opacity: 1; transform: scale(1.05); }

  .service-kinds { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-4); margin-bottom: var(--space-8); }
  .service-kind-card { padding: var(--space-5); background: var(--color-bg-card); border-radius: var(--radius-lg); transition: all var(--transition-base); }
  .service-kind-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }
  .service-kind-header { display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-3); }
  .service-kind-header h3 { font-size: var(--text-md); font-weight: 700; }
  .service-kind-card p { color: var(--color-text-muted); font-size: var(--text-sm); }

  @media (max-width: 768px) {
    .hero { padding: var(--space-8) var(--space-5); min-height: 350px; }
    .services-cards { grid-template-columns: 1fr; }
    .service-kinds { grid-template-columns: repeat(2, 1fr); }
  }
  @media (max-width: 480px) { .service-kinds { grid-template-columns: 1fr; } }

  /* Partners Marquee */
  .partners-section { margin-bottom: var(--space-8); }
  .marquee-container {
    width: 100%;
    overflow: hidden;
    position: relative;
    padding: var(--space-4) 0;
    mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
  }

  .marquee-track {
    display: flex;
    gap: var(--space-8);
    width: max-content;
    animation: scroll 40s linear infinite;
  }

  .marquee-track:hover {
    animation-play-state: paused;
  }

  .partner-item {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .partner-logo {
    padding: var(--space-4) var(--space-8);
    background: var(--color-white);
    border: 1px solid var(--color-border);
    border-radius: 20px;
    transition: all 0.3s ease;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 200px;
  }

  .partner-logo img {
    max-height: 100%;
    max-width: 100%;
    object-fit: contain;
    filter: grayscale(100%);
    transition: all 0.3s ease;
    opacity: 0.7;
  }

  .partner-item:hover .partner-logo {
    border-color: var(--color-accent);
    transform: scale(1.05);
    box-shadow: var(--shadow-sm);
  }
  
  .partner-item:hover .partner-logo img {
    filter: grayscale(0%);
    opacity: 1;
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  /* CTA Section */
  .section { margin-bottom: var(--space-8); }
  .cta {
    background: var(--color-bg-card);
    border-radius: var(--radius-xl);
    padding: var(--space-12) var(--space-8);
    text-align: center;
  }

  .cta-content {
    max-width: 600px;
    margin: 0 auto;
  }

  .cta h2 {
    font-size: var(--text-3xl);
    margin-bottom: var(--space-4);
  }

  .cta p {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    margin-bottom: var(--space-8);
  }
</style>
