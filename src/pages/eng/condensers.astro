---
import type { Lang } from '@/i18n';
import { getBaseUrl } from '@/i18n';
import BaseLayout from '@/layouts/BaseLayout.astro';
import Breadcrumbs from '@/components/Breadcrumbs.astro';
import CtaFaq from '@/components/CtaFaq.astro';
import Faq from '@/components/Faq.astro';
import Partners from '@/components/Partners.astro';

const lang: Lang = 'en';
const base = getBaseUrl(lang);

const faqItems = [
  {
    question: "What is the service life of RUSTRADE condensers?",
    answer: "The calculated service life of condensers is at least 40 years with proper operation and regular maintenance. Warranty period is 24 months from commissioning."
  },
  {
    question: "Is it possible to replace a condenser without changing foundations and connecting pipelines?",
    answer: "Yes, our specialists adapt the condenser design to existing connection dimensions and support locations. If necessary, site inspection is performed to accurately determine all parameters and installation features."
  },
  {
    question: "What materials are used for condenser tubes when working with seawater?",
    answer: "For seawater operation, we use tubes made of special alloys with high corrosion resistance, such as MNK 70/30 (copper-nickel alloy), special grade stainless steel or titanium alloys. Material selection depends on specific operating conditions and customer requirements."
  },
  {
    question: "What are the manufacturing and delivery times for condensers?",
    answer: "Manufacturing time depends on the size and complexity of the condenser and ranges from 6 to 12 months from technical specification approval. Production acceleration is possible when urgent equipment replacement is needed."
  },
  {
    question: "How accurate are the online calculator results?",
    answer: "The calculator provides a preliminary estimate with ±15% accuracy. Results are based on standard parameters of KP/KG series condensers. For accurate calculation, the following must be considered: turbine exhaust steam pressure, cooling water temperature and quality, required vacuum, station operating mode. Our engineers will perform detailed thermal-hydraulic calculation free of charge."
  },
  {
    question: "Why is water consumption higher for seawater?",
    answer: "When using seawater, a coefficient of 1.15 is applied to the calculated flow rate. This is due to: lower heat capacity of seawater due to salts, need to reduce flow velocity to minimize tube corrosion, consideration of biofouling and clogging. Special corrosion-resistant materials (copper-nickel alloys, titanium) are also used, affecting the design."
  },
  {
    question: "How is the condenser model determined in the calculator?",
    answer: "The model is selected by turbine power: up to 25 MW — KP-2000, up to 50 MW — KP-3500, up to 100 MW — KG-6200, up to 200 MW — KG-10000, over 200 MW — KG-15000. The number in the name indicates heat exchange surface in m². Final model selection is made after detailed calculation considering all your turbine unit parameters."
  },
  {
    question: "Can I order a condenser with parameters different from calculated?",
    answer: "Yes, we design condensers to individual requirements. You can change: heat exchange surface, tube and tubesheet material, design configuration (1/2/4-pass), flow arrangement (1 or 2 flows). The calculator provides a starting point, final parameters are agreed with our engineers."
  }
];

const types = [
  {
    title: 'Design Configuration',
    description: 'Single, double or four-pass design adapted to specific customer requirements and turbine features'
  },
  {
    title: 'Flow Arrangement',
    description: 'Single or double-flow design for optimal working medium flow organization and maximum heat exchange efficiency'
  },
  {
    title: 'Heat Exchange Surface',
    description: 'Heat exchange surface range from 500 to 15,000 m², allowing optimal solution selection for turbines of various power'
  },
  {
    title: 'Cooling Water Type',
    description: 'Special materials and design solutions for operation with both fresh and seawater considering specific site features'
  }
];

const advantages = [
  {
    title: 'Double-flow Design',
    description: 'Allows service maintenance and tube bundle cleaning of one flow without equipment shutdown, significantly improving economic performance',
    icon: '/img/Proektnaya_dokumentaciya/documents_files.svg'
  },
  {
    title: 'Spring Supports',
    description: 'Provide thermal expansion compensation without need for additional compensating devices, simplifying installation and operation',
    icon: '/img/Proektnaya_dokumentaciya/protection_security_finger_thumb_biometr.svg'
  },
  {
    title: 'Special Materials',
    description: 'Application of materials resistant to various working environments, including corrosion-resistant alloys for seawater and aggressive media operation',
    icon: '/img/Proektnaya_dokumentaciya/magnifier_search.svg'
  }
];

const deliveryFeatures = [
  {
    title: 'Maximum Factory Readiness',
    description: 'Condensers are supplied with maximum factory readiness, significantly reducing on-site installation time and accelerating commissioning.',
    tags: ['Ready modules', 'Minimal installation', 'Quick startup'],
    image: '/img/condensers/Maximum factory readiness.jpg'
  },
  {
    title: 'Ejector Package',
    description: 'Option of package with startup and main two-stage steam jet ejector for creating and maintaining required vacuum in the condenser.',
    tags: ['Startup ejector', 'Main ejector', 'High vacuum'],
    image: '/img/condensers/Complete with ejectors.jpg'
  },
  {
    title: 'Reduced Installation Time',
    description: 'Well-thought design solutions and high factory readiness ensure significant reduction in installation and commissioning time.',
    tags: ['Quick installation', 'Minimal adjustment', 'Time saving'],
    image: '/img/condensers/Reduction of installation time.jpg'
  }
];

const stats = [
  { value: 8, label: 'Completed projects' },
  { value: 10, label: 'Regular clients' },
  { value: 5, label: 'Years of experience' },
  { value: 20, label: 'Leading specialists' }
];

const workAdvantages = [
  {
    title: 'High Quality',
    description: 'We use advanced technologies and materials ensuring durability and reliability of equipment',
    icon: '/img/lopatki/icons/like_6016641.png'
  },
  {
    title: 'Modern Equipment',
    description: 'Production is equipped with high-precision equipment from leading global manufacturers',
    icon: '/img/lopatki/icons/industrial-robot_9837143.png'
  },
  {
    title: 'Standards Compliance',
    description: 'All products meet GOST, ISO and international quality standards requirements',
    icon: '/img/lopatki/icons/eac_17379530.png'
  },
  {
    title: 'Deadline Compliance',
    description: 'Strict adherence to agreed manufacturing and delivery deadlines',
    icon: '/img/lopatki/icons/long-term_9966603.png'
  }
];
---

<BaseLayout 
  lang={lang} 
  title="Steam Turbine Condensers — RUSTRADE"
  description="High-efficiency surface condensers for steam turbines. Under-hood, single and double-pass. Custom design and manufacturing to your specifications."
  keywords="steam turbine condensers, surface condensers, turbine heat exchangers, custom condenser, RUSTRADE"
  image="/img/condensers/condenser_hero.webp"
  faqData={faqItems}
  breadcrumbs={[{ name: 'Condensers', url: '/eng/condensers' }]}
  productData={{
    name: 'Steam Turbine Condensers',
    description: 'High-efficiency surface condensers for steam turbines',
    image: '/img/condensers/condenser_hero.webp',
    category: 'Turbine auxiliary equipment'
  }}
>
  <Breadcrumbs items={[{ label: 'Condensers' }]} lang={lang} />

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1>Steam Turbine Condensers</h1>
      <p>High-efficiency surface condensers of various designs for steam turbines with optimal technical characteristics</p>
      <div class="hero-buttons">
        <button class="button-47" data-modal="condenser">
          <span class="button-47__circle">
            <svg class="button-47__icon-svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <g class="icon-condenser">
                <path d="M5 6v12a7 3 0 0 0 14 0V6"/>
                <ellipse cx="12" cy="6" rx="7" ry="3"/>
                <circle cx="9" cy="10" r="1"/>
                <circle cx="12" cy="10" r="1"/>
                <circle cx="15" cy="10" r="1"/>
                <circle cx="9" cy="14" r="1"/>
                <circle cx="12" cy="14" r="1"/>
                <circle cx="15" cy="14" r="1"/>
              </g>
            </svg>
          </span>
          <span class="button-47__text">Order Condenser</span>
        </button>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section class="section about-turbines">
    <div class="section-header">
      <h2>About Steam Turbine Condensers</h2>
    </div>
    <div class="about-content">
      <div class="about-text">
        <p>
          Steam turbine condenser is a key element of thermal power plants, designed for condensation of exhaust steam from the turbine and creating vacuum that increases the efficiency of the entire power unit. The economy and stability of the entire power plant directly depend on the quality and reliability of the condenser.
        </p>
        <p>
          RUSTRADE LLC offers surface condensers of various designs with the following key advantages:
        </p>
        <ul class="features-list">
          <li><strong>Optimal design</strong> – condensers with single-, double- or four-pass configurations adapted to specific operating conditions</li>
          <li><strong>High efficiency</strong> – maximum heat transfer with minimum hydraulic resistance</li>
          <li><strong>Reliability</strong> – use of high-quality materials resistant to various working environments, including seawater</li>
          <li><strong>Ease of maintenance</strong> – special design solutions allowing service maintenance without complete equipment shutdown</li>
        </ul>
        <p>
          Our condensers are manufactured according to customer's individual technical specifications, which allows optimal integration into existing or designed energy systems with maximum efficiency.
        </p>
      </div>
      <div class="about-image">
        <img src="/img/condensers/condenser_main.webp" alt="Steam turbine condenser" />
      </div>
    </div>
  </section>

  <!-- Types Section -->
  <section class="section modifications">
    <div class="section-header">
      <h2>Types and Modifications of Condensers</h2>
      <p>Variety of design configurations for optimal compliance with technical requirements of various power plants</p>
    </div>
    <div class="modifications-grid">
      {types.map((type) => (
        <div class="modification-card">
          <div class="modification-header">
            <h3>{type.title}</h3>
          </div>
          <p class="modification-description">{type.description}</p>
        </div>
      ))}
    </div>
  </section>

  <!-- Technical Features Section with 3D Turbine -->
  <section class="section tech-features-infographic">
    <div class="turbine-3d-container" id="turbine-canvas"></div>
    
    <div class="tech-features-content">
      <div class="section-header">
        <h2>Technical Specifications</h2>
        <p>Professional equipment designed to meet all energy industry requirements</p>
      </div>
      
      <div class="tech-features-cards">
        <div class="infographic-card">
          <div class="card-icon">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M24 4L4 14V34L24 44L44 34V14L24 4Z" stroke="currentColor" stroke-width="2"/>
              <path d="M24 18L14 23V33L24 38L34 33V23L24 18Z" fill="currentColor" opacity="0.2"/>
              <path d="M24 4V18M4 14L24 24M44 14L24 24" stroke="currentColor" stroke-width="2"/>
              <circle cx="24" cy="24" r="6" stroke="currentColor" stroke-width="2"/>
              <path d="M21 24L23 26L27 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3>High Heat Exchange Efficiency</h3>
          <p>Optimized heat exchange surfaces from 500 to 15,000 m² ensure maximum steam condensation</p>
        </div>
        
        <div class="infographic-card">
          <div class="card-icon">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="24" cy="24" r="18" stroke="currentColor" stroke-width="2"/>
              <path d="M24 12V24L32 28" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M38 24C38 31.732 31.732 38 24 38" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
              <circle cx="24" cy="24" r="4" fill="currentColor" opacity="0.3"/>
            </svg>
          </div>
          <h3>Long Service Life</h3>
          <p>Designed condenser service life is at least 40 years when operating rules are followed</p>
        </div>
        
        <div class="infographic-card">
          <div class="card-icon">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M24 4L6 12V24C6 35 24 44 24 44C24 44 42 35 42 24V12L24 4Z" stroke="currentColor" stroke-width="2"/>
              <path d="M24 10L12 16V24C12 31 24 38 24 38C24 38 36 31 36 24V16L24 10Z" fill="currentColor" opacity="0.15"/>
              <path d="M17 24L22 29L31 20" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3>Corrosion Resistance</h3>
          <p>Special materials for operation with seawater and freshwater, including copper-nickel and titanium alloys</p>
        </div>
        
        <div class="infographic-card">
          <div class="card-icon">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 8c-3.3 0-6 2.7-6 6s2.7 6 6 6c1.1 0 2.1-.3 3-.8L28 32.2c-.5.9-.8 1.9-.8 3 0 3.3 2.7 6 6 6s6-2.7 6-6-2.7-6-6-6c-1.1 0-2.1.3-3 .8L17.2 17c.5-.9.8-1.9.8-3 0-3.3-2.7-6-6-6z" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="currentColor" fill-opacity="0.15"/>
              <circle cx="12" cy="14" r="2.5" fill="currentColor"/>
              <circle cx="33.2" cy="35.2" r="2.5" fill="currentColor"/>
            </svg>
          </div>
          <h3>Minimum Hydraulic Resistance</h3>
          <p>Optimized cooling water channels ensure electricity savings on pumping</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Calculator Section -->
  <section class="section calculator-section">
    <div class="calculator-wrapper">
      <div class="calculator-header">
        <div class="calculator-title">
          <h2>Selection Calculator</h2>
          <p>Preliminary calculation of optimal condenser model</p>
        </div>
      </div>
      
      <div class="calculator-body">
        <div class="calculator-left">
          <h4 class="calc-section-title">Calculation Parameters</h4>
          <div class="calculator-form-card">
            <div class="form-icon-row">
              <div class="form-group-modern">
                <div class="input-wrapper">
                  <label for="turbine-power">Turbine Power</label>
                  <div class="input-with-unit">
                    <input type="number" id="turbine-power" name="turbine-power" min="1" max="500" placeholder="0" />
                    <span class="unit">MW</span>
                  </div>
                </div>
              </div>
              
              <div class="form-group-modern">
                <div class="input-wrapper">
                  <label for="water-type">Water Type</label>
                  <select id="water-type" name="water-type">
                    <option value="fresh">Freshwater</option>
                    <option value="sea">Seawater</option>
                  </select>
                </div>
              </div>
            </div>
            
            <button type="button" id="calculate-btn" class="calculate-btn-modern">
              <span class="btn-text">Calculate</span>
            </button>
          </div>
          
          <div class="calculator-results-card" id="calculation-results">
            <div class="results-header">
              <h4>Recommended Condenser</h4>
            </div>
            
            <div class="results-grid">
              <div class="result-card">
                <span class="result-card-label">Model</span>
                <span class="result-card-value" id="model-result">—</span>
              </div>
              
              <div class="result-card">
                <span class="result-card-label">Surface</span>
                <span class="result-card-value" id="surface-result">—</span>
              </div>
              
              <div class="result-card">
                <span class="result-card-label">Configuration</span>
                <span class="result-card-value" id="type-result">—</span>
              </div>
              
              <div class="result-card">
                <span class="result-card-label">Vacuum</span>
                <span class="result-card-value" id="vacuum-result">—</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="calculator-right">
          <div class="description-content">
            <h4>What does the calculator compute?</h4>
            <ul class="calc-features">
              <li><strong>Condenser model</strong> — optimal size from KP/KG series for your turbine</li>
              <li><strong>Heat exchange surface</strong> — calculated area in m² for efficient steam condensation</li>
              <li><strong>Water flow rate</strong> — required cooling water volume in m³/h</li>
              <li><strong>Condenser weight</strong> — approximate equipment weight for foundation design</li>
            </ul>
          </div>
          <div class="description-note">
            <h4>How to use</h4>
            <p>Enter turbine power (MW) and select cooling water type. The calculator will automatically select the optimal condenser model taking into account the seawater coefficient.</p>
          </div>
        </div>
      </div>
      
      <p class="calculator-note">
        Results are preliminary. For accurate calculation, please contact our specialists.
      </p>
    </div>
  </section>

  <!-- Technical Advantages Section -->
  <section class="section services">
    <div class="section-header">
      <h2>Technical Advantages</h2>
      <p>Innovative design solutions ensuring high efficiency and reliability of condensers</p>
    </div>
    <div class="additional-services-grid">
      {advantages.map((advantage) => (
        <div class="additional-service-card">
          <div class="additional-service-header">
            <div class="additional-service-icon">
              <img src={advantage.icon} alt={advantage.title} />
            </div>
            <h3>{advantage.title}</h3>
          </div>
          <p>{advantage.description}</p>
        </div>
      ))}
    </div>
  </section>

  <!-- Delivery Section -->
  <section class="section delivery-section">
    <div class="section-header">
      <h2>Configuration and Delivery</h2>
      <p>Maximum factory readiness for quick installation and commissioning</p>
    </div>
    <div class="delivery-grid">
      {deliveryFeatures.map((feature) => (
        <div class="delivery-card">
          <img src={feature.image} alt={feature.title} class="delivery-bg-image" />
          <div class="delivery-content">
            <div class="delivery-title-wrapper">
              <h3>{feature.title}</h3>
            </div>
            <div class="delivery-description">
              <p>{feature.description}</p>
            </div>
            <div class="delivery-tags">
              {feature.tags.map((tag) => (
                <span class="tag">{tag}</span>
              ))}
            </div>
          </div>
        </div>
      ))}
    </div>
  </section>

  <!-- Stats Section -->
  <section class="section stats-section">
    <div class="stats-grid">
      {stats.map((stat) => (
        <div class="stat-card">
          <div class="stat-value" data-value={stat.value}>0</div>
          <div class="stat-label">{stat.label}</div>
        </div>
      ))}
    </div>
  </section>

  <!-- Work Advantages Section -->
  <section class="section work-advantages-section">
    <div class="section-header">
      <h2>Advantages of Working With Us</h2>
      <p>Professional team of engineers and technologists with extensive experience in power equipment manufacturing</p>
    </div>
    <div class="work-advantages-grid">
      {workAdvantages.map((advantage) => (
        <div class="work-advantage-card">
          <div class="work-advantage-icon">
            <img src={advantage.icon} alt="" width="48" height="48" />
          </div>
          <h3>{advantage.title}</h3>
          <p>{advantage.description}</p>
        </div>
      ))}
    </div>
  </section>

  <!-- Partners Section -->
  <Partners lang={lang} />

  <Faq items={faqItems} lang={lang} title="FAQ" subtitle="Frequently asked questions about steam turbine condensers" />

  <CtaFaq lang={lang} />
</BaseLayout>

<script>
  function animateStats() {
    const statValues = document.querySelectorAll('.stat-value');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const el = entry.target as HTMLElement;
          const target = parseInt(el.dataset.value || '0');
          let current = 0;
          const increment = target / 50;
          const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
              current = target;
              clearInterval(timer);
            }
            el.textContent = String(Math.floor(current));
          }, 30);
          observer.unobserve(el);
        }
      });
    }, { threshold: 0.5 });

    statValues.forEach(stat => observer.observe(stat));
  }

  // Calculator logic
  function initCalculator() {
    const calculateBtn = document.getElementById('calculate-btn');
    const resultsDiv = document.getElementById('calculation-results');
    
    if (calculateBtn) {
      calculateBtn.addEventListener('click', function() {
        const powerInput = document.getElementById('turbine-power') as HTMLInputElement;
        const waterTypeSelect = document.getElementById('water-type') as HTMLSelectElement;
        
        const power = parseFloat(powerInput?.value || '0');
        const waterType = waterTypeSelect?.value || 'fresh';
        
        if (!power || power <= 0) {
          alert('Please enter turbine power');
          return;
        }
        
        // Calculate results based on power and water type
        let model = '';
        let surface = 0;
        let typeResult = '';
        let vacuum = '';
        
        if (power <= 6) {
          model = 'K-' + Math.round(power * 100);
          surface = Math.round(power * 150);
          typeResult = 'Single-pass';
          vacuum = '94-96%';
        } else if (power <= 25) {
          model = 'K-' + Math.round(power * 80);
          surface = Math.round(power * 120);
          typeResult = 'Double-pass';
          vacuum = '95-97%';
        } else if (power <= 60) {
          model = 'K-' + Math.round(power * 60);
          surface = Math.round(power * 100);
          typeResult = 'Double-pass dual-flow';
          vacuum = '96-97.5%';
        } else {
          model = 'K-' + Math.round(power * 50);
          surface = Math.round(power * 85);
          typeResult = 'Four-pass dual-flow';
          vacuum = '96.5-98%';
        }
        
        // Adjust for sea water
        if (waterType === 'sea') {
          model += 'M';
          typeResult += ' (marine version)';
        }
        
        // Update results
        const modelResult = document.getElementById('model-result');
        const surfaceResult = document.getElementById('surface-result');
        const typeResultEl = document.getElementById('type-result');
        const vacuumResult = document.getElementById('vacuum-result');
        
        if (modelResult) modelResult.textContent = model;
        if (surfaceResult) surfaceResult.textContent = surface + ' m²';
        if (typeResultEl) typeResultEl.textContent = typeResult;
        if (vacuumResult) vacuumResult.textContent = vacuum;
        
        if (resultsDiv) {
          resultsDiv.classList.add('active');
        }
      });
    }
  }

  // 3D Realistic Steel Turbine
  async function init3DTurbine() {
    const container = document.getElementById('turbine-canvas');
    if (!container) return;
    
    const THREE = await import('https://unpkg.com/three@0.153.0/build/three.module.js');
    const { OrbitControls } = await import('https://unpkg.com/three@0.153.0/examples/jsm/controls/OrbitControls.js');
    const { GPUComputationRenderer } = await import('https://unpkg.com/three@0.153.0/examples/jsm/misc/GPUComputationRenderer.js');
    
    const scene = new THREE.Scene();
    scene.background = null;
    
    const width = container.clientWidth;
    const height = container.clientHeight;
    
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(width, height);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    renderer.toneMapping = THREE.ACESFilmicToneMapping;
    renderer.toneMappingExposure = 1.2;
    renderer.setClearColor(0x000000, 0);
    container.appendChild(renderer.domElement);
    
    const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 100);
    camera.position.set(0, 3, 14);
    camera.lookAt(0, 0, 0);
    
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.target.set(0, 0, 0);
    controls.enableZoom = false;
    controls.enablePan = false;
    
    const isMobile = width < 400;
    scene.position.x = isMobile ? 4 - 0.75 : 4;
    scene.rotation.y = Math.PI;
    scene.scale.setScalar(1.5);
    
    const steelMaterials = {
      polishedSteel: new THREE.MeshStandardMaterial({ color: 0xB0B0B0, metalness: 0.6, roughness: 0.25 }),
      brushedSteel: new THREE.MeshStandardMaterial({ color: 0x909090, metalness: 0.5, roughness: 0.4 }),
      darkSteel: new THREE.MeshStandardMaterial({ color: 0x606060, metalness: 0.4, roughness: 0.5 }),
      bladeSteel: new THREE.MeshStandardMaterial({ color: 0xA8A8A8, metalness: 0.55, roughness: 0.3 }),
      chromeSteel: new THREE.MeshStandardMaterial({ color: 0xC8C8C8, metalness: 0.7, roughness: 0.15 })
    };
    
    // Enhanced Lighting Setup for steel look
    const ambient = new THREE.AmbientLight(0xffffff, 0.8);
    scene.add(ambient);
    
    const keyLight = new THREE.DirectionalLight(0xffffff, 2.0);
    keyLight.position.set(8, 12, 10);
    keyLight.castShadow = true;
    keyLight.shadow.mapSize.width = 2048;
    keyLight.shadow.mapSize.height = 2048;
    scene.add(keyLight);
    
    const fillLight = new THREE.DirectionalLight(0xaabbcc, 1.0);
    fillLight.position.set(-8, 4, -6);
    scene.add(fillLight);
    
    const rimLight = new THREE.DirectionalLight(0xccddff, 1.2);
    rimLight.position.set(-3, -3, 8);
    scene.add(rimLight);
    
    const topLight = new THREE.DirectionalLight(0xffffff, 0.8);
    topLight.position.set(0, 15, 0);
    scene.add(topLight);
    
    const backLight = new THREE.DirectionalLight(0xffffff, 0.6);
    backLight.position.set(0, 5, -10);
    scene.add(backLight);
    
    function createTurbineStage(params) {
      const group = new THREE.Group();
      group.position.x = params.xOffset;
      
      // Main disc with hub details
      const discGeometry = new THREE.CylinderGeometry(params.radius, params.radius * 0.95, params.thickness, 128);
      discGeometry.rotateZ(Math.PI / 2);
      const discMesh = new THREE.Mesh(discGeometry, steelMaterials.brushedSteel.clone());
      discMesh.castShadow = true;
      discMesh.receiveShadow = true;
      group.add(discMesh);
      
      // Inner hub ring
      const hubRingGeo = new THREE.TorusGeometry(params.radius * 0.4, 0.05, 16, 64);
      hubRingGeo.rotateY(Math.PI / 2);
      const hubRingMesh = new THREE.Mesh(hubRingGeo, steelMaterials.chromeSteel);
      hubRingMesh.position.x = params.thickness / 2 + 0.02;
      group.add(hubRingMesh);
      
      const hubRingMesh2 = hubRingMesh.clone();
      hubRingMesh2.position.x = -params.thickness / 2 - 0.02;
      group.add(hubRingMesh2);
      
      // Add bolts/rivets on disc face
      const boltCount = 12;
      for (let i = 0; i < boltCount; i++) {
        const angle = (2 * Math.PI * i) / boltCount;
        const boltRadius = params.radius * 0.7;
        
        const boltGeo = new THREE.CylinderGeometry(0.03, 0.03, 0.08, 8);
        boltGeo.rotateZ(Math.PI / 2);
        const boltMesh = new THREE.Mesh(boltGeo, steelMaterials.chromeSteel);
        boltMesh.position.set(
          params.thickness / 2 + 0.04,
          Math.cos(angle) * boltRadius,
          Math.sin(angle) * boltRadius
        );
        group.add(boltMesh);
        
        // Bolt head
        const boltHeadGeo = new THREE.CylinderGeometry(0.045, 0.045, 0.02, 6);
        boltHeadGeo.rotateZ(Math.PI / 2);
        const boltHeadMesh = new THREE.Mesh(boltHeadGeo, steelMaterials.darkSteel);
        boltHeadMesh.position.set(
          params.thickness / 2 + 0.09,
          Math.cos(angle) * boltRadius,
          Math.sin(angle) * boltRadius
        );
        group.add(boltHeadMesh);
      }
      
      // Create rectangular blades
      for (let i = 0; i < params.bladeCount; i++) {
        const angle = (2 * Math.PI * i) / params.bladeCount;
        
        // Simple rectangular blade using BoxGeometry
        const bladeGeo = new THREE.BoxGeometry(params.bladeThickness, params.bladeLength, params.bladeWidth);
        
        // Alternate blade coloring for visual depth
        const bladeMat = (i % 3 === 0) ? steelMaterials.bladeSteel.clone() : 
                         (i % 3 === 1) ? steelMaterials.polishedSteel.clone() : 
                         steelMaterials.brushedSteel.clone();
        
        const bladeMesh = new THREE.Mesh(bladeGeo, bladeMat);
        bladeMesh.castShadow = true;
        bladeMesh.receiveShadow = true;
        
        // Position blade radially outward from disc
        const radial = new THREE.Vector3(0, Math.cos(angle), Math.sin(angle));
        const offset = params.radius + params.bladeLength / 2;
        bladeMesh.position.copy(radial.clone().multiplyScalar(offset));
        
        // Rotate blade to face outward
        const quaternion = new THREE.Quaternion();
        quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), radial);
        bladeMesh.quaternion.copy(quaternion);
        
        group.add(bladeMesh);
      }
      
      return group;
    }
    
    // Stage configurations
    const stages = [
      { radius: 2.2, thickness: 0.4, bladeCount: 52, bladeLength: 0.85, bladeWidth: 0.12, bladeThickness: 0.08, xOffset: -1.4 },
      { radius: 2.0, thickness: 0.38, bladeCount: 48, bladeLength: 0.75, bladeWidth: 0.11, bladeThickness: 0.07, xOffset: 0.0 },
      { radius: 1.8, thickness: 0.35, bladeCount: 44, bladeLength: 0.65, bladeWidth: 0.10, bladeThickness: 0.065, xOffset: 1.2 },
    ];
    
    // Create main shaft with details
    const totalLength = stages[stages.length - 1].xOffset - stages[0].xOffset + 2.5;
    const shaftGroup = new THREE.Group();
    
    // Main shaft body
    const shaftGeo = new THREE.CylinderGeometry(0.45, 0.45, totalLength, 64);
    shaftGeo.rotateZ(Math.PI / 2);
    const shaftMesh = new THREE.Mesh(shaftGeo, steelMaterials.polishedSteel);
    shaftMesh.castShadow = true;
    shaftMesh.receiveShadow = true;
    shaftMesh.position.x = (stages[0].xOffset + stages[stages.length - 1].xOffset) / 2;
    shaftGroup.add(shaftMesh);
    
    // Shaft journals (bearing surfaces)
    const journalPositions = [-2.0, 2.0];
    journalPositions.forEach(pos => {
      const journalGeo = new THREE.CylinderGeometry(0.52, 0.52, 0.3, 32);
      journalGeo.rotateZ(Math.PI / 2);
      const journalMesh = new THREE.Mesh(journalGeo, steelMaterials.chromeSteel);
      journalMesh.position.x = pos;
      journalMesh.castShadow = true;
      shaftGroup.add(journalMesh);
      
      // Journal rings
      const ringGeo = new THREE.TorusGeometry(0.53, 0.03, 12, 32);
      ringGeo.rotateY(Math.PI / 2);
      const ringMesh1 = new THREE.Mesh(ringGeo, steelMaterials.darkSteel);
      ringMesh1.position.x = pos + 0.15;
      shaftGroup.add(ringMesh1);
      const ringMesh2 = ringMesh1.clone();
      ringMesh2.position.x = pos - 0.15;
      shaftGroup.add(ringMesh2);
    });
    
    // Shaft grooves between stages
    stages.forEach((stage, idx) => {
      if (idx < stages.length - 1) {
        const midX = (stage.xOffset + stages[idx + 1].xOffset) / 2;
        const grooveGeo = new THREE.TorusGeometry(0.46, 0.02, 8, 32);
        grooveGeo.rotateY(Math.PI / 2);
        const grooveMesh = new THREE.Mesh(grooveGeo, steelMaterials.darkSteel);
        grooveMesh.position.x = midX;
        shaftGroup.add(grooveMesh);
      }
    });
    
    scene.add(shaftGroup);
    
    const stageGroups = [];
    stages.forEach((params, idx) => {
      const stageGroup = createTurbineStage(params);
      stageGroup.userData.isRotatingStage = true;
      stageGroup.userData.stageIndex = idx;
      scene.add(stageGroup);
      stageGroups.push(stageGroup);
    });
    
    const simplexNoiseDerivatives4 = `
vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
float mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
float permute(float x) { return mod289(((x*34.0)+1.0)*x); }
vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
float taylorInvSqrt(float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 grad4(float j, vec4 ip) {
  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
  vec4 p,s;
  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
  s = vec4(lessThan(p, vec4(0.0)));
  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;
  return p;
}
#define F4 0.309016994374947451
vec4 snoise4(vec4 v) {
  const vec4 C = vec4(0.138196601125011, 0.276393202250021, 0.414589803375032, -0.447213595499958);
  vec4 i = floor(v + dot(v, vec4(F4)));
  vec4 x0 = v - i + dot(i, C.xxxx);
  vec4 i0;
  vec3 isX = step(x0.yzw, x0.xxx);
  vec3 isYZ = step(x0.zww, x0.yyz);
  i0.x = isX.x + isX.y + isX.z;
  i0.yzw = 1.0 - isX;
  i0.y += isYZ.x + isYZ.y;
  i0.zw += 1.0 - isYZ.xy;
  i0.z += isYZ.z;
  i0.w += 1.0 - isYZ.z;
  vec4 i3 = clamp(i0, 0.0, 1.0);
  vec4 i2 = clamp(i0 - 1.0, 0.0, 1.0);
  vec4 i1 = clamp(i0 - 2.0, 0.0, 1.0);
  vec4 x1 = x0 - i1 + C.xxxx;
  vec4 x2 = x0 - i2 + C.yyyy;
  vec4 x3 = x0 - i3 + C.zzzz;
  vec4 x4 = x0 + C.wwww;
  i = mod289(i);
  float j0 = permute(permute(permute(permute(i.w) + i.z) + i.y) + i.x);
  vec4 j1 = permute(permute(permute(permute(i.w + vec4(i1.w, i2.w, i3.w, 1.0)) + i.z + vec4(i1.z, i2.z, i3.z, 1.0)) + i.y + vec4(i1.y, i2.y, i3.y, 1.0)) + i.x + vec4(i1.x, i2.x, i3.x, 1.0));
  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0);
  vec4 p0 = grad4(j0, ip);
  vec4 p1 = grad4(j1.x, ip);
  vec4 p2 = grad4(j1.y, ip);
  vec4 p3 = grad4(j1.z, ip);
  vec4 p4 = grad4(j1.w, ip);
  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
  p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;
  p4 *= taylorInvSqrt(dot(p4,p4));
  vec3 values0 = vec3(dot(p0, x0), dot(p1, x1), dot(p2, x2));
  vec2 values1 = vec2(dot(p3, x3), dot(p4, x4));
  vec3 m0 = max(0.5 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);
  vec2 m1 = max(0.5 - vec2(dot(x3,x3), dot(x4,x4)), 0.0);
  vec3 temp0 = -6.0 * m0 * m0 * values0;
  vec2 temp1 = -6.0 * m1 * m1 * values1;
  vec3 mmm0 = m0 * m0 * m0;
  vec2 mmm1 = m1 * m1 * m1;
  float dx = temp0[0] * x0.x + temp0[1] * x1.x + temp0[2] * x2.x + temp1[0] * x3.x + temp1[1] * x4.x + mmm0[0] * p0.x + mmm0[1] * p1.x + mmm0[2] * p2.x + mmm1[0] * p3.x + mmm1[1] * p4.x;
  float dy = temp0[0] * x0.y + temp0[1] * x1.y + temp0[2] * x2.y + temp1[0] * x3.y + temp1[1] * x4.y + mmm0[0] * p0.y + mmm0[1] * p1.y + mmm0[2] * p2.y + mmm1[0] * p3.y + mmm1[1] * p4.y;
  float dz = temp0[0] * x0.z + temp0[1] * x1.z + temp0[2] * x2.z + temp1[0] * x3.z + temp1[1] * x4.z + mmm0[0] * p0.z + mmm0[1] * p1.z + mmm0[2] * p2.z + mmm1[0] * p3.z + mmm1[1] * p4.z;
  float dw = temp0[0] * x0.w + temp0[1] * x1.w + temp0[2] * x2.w + temp1[0] * x3.w + temp1[1] * x4.w + mmm0[0] * p0.w + mmm0[1] * p1.w + mmm0[2] * p2.w + mmm1[0] * p3.w + mmm1[1] * p4.w;
  return vec4(dx, dy, dz, dw) * 49.0;
}
`;

    const curlNoise = `
${simplexNoiseDerivatives4}
vec3 curl(vec3 p, float noiseTime, float persistence) {
  vec4 xNoisePotentialDerivatives = vec4(0.0);
  vec4 yNoisePotentialDerivatives = vec4(0.0);
  vec4 zNoisePotentialDerivatives = vec4(0.0);
  for (int i = 0; i < 3; ++i) {
    float twoPowI = pow(2.0, float(i));
    float scale = 0.5 * twoPowI * pow(persistence, float(i));
    xNoisePotentialDerivatives += snoise4(vec4(p * twoPowI, noiseTime)) * scale;
    yNoisePotentialDerivatives += snoise4(vec4((p + vec3(123.4, 129845.6, -1239.1)) * twoPowI, noiseTime)) * scale;
    zNoisePotentialDerivatives += snoise4(vec4((p + vec3(-9519.0, 9051.0, -123.0)) * twoPowI, noiseTime)) * scale;
  }
  return vec3(
    zNoisePotentialDerivatives[1] - yNoisePotentialDerivatives[2],
    xNoisePotentialDerivatives[2] - zNoisePotentialDerivatives[0],
    yNoisePotentialDerivatives[0] - xNoisePotentialDerivatives[1]
  );
}
`;

    const PARTICLE_COUNT = 90;
    const gpuCompute = new GPUComputationRenderer(PARTICLE_COUNT, PARTICLE_COUNT, renderer);
    
    const dtPosition = gpuCompute.createTexture();
    const dtDefaultPosition = gpuCompute.createTexture();
    const posArray = dtPosition.image.data;
    const defaultPosArray = dtDefaultPosition.image.data;
    
    for (let i = 0; i < posArray.length; i += 4) {
      defaultPosArray[i] = Math.random();
      defaultPosArray[i + 1] = Math.random();
      defaultPosArray[i + 2] = Math.random();
      defaultPosArray[i + 3] = Math.random();
      
      const angle = defaultPosArray[i + 3] * Math.PI * 2;
      const radius = 2.5 + defaultPosArray[i] * 0.8;
      const axial = defaultPosArray[i + 1] * 2.3 - 1.15;
      
      posArray[i] = axial;
      posArray[i + 1] = Math.cos(angle) * radius;
      posArray[i + 2] = Math.sin(angle) * radius;
      posArray[i + 3] = Math.random();
    }
    
    const positionFragmentShader = `
uniform sampler2D textureDefaultPosition;
uniform float time;
uniform float speed;
uniform float dieSpeed;
uniform float curlSize;
uniform float turbineRotation;

${curlNoise}

void main() {
  vec2 uv = gl_FragCoord.xy / resolution.xy;
  vec4 positionInfo = texture2D(texturePosition, uv);
  vec3 position = positionInfo.xyz;
  float life = positionInfo.a - dieSpeed;
  
  if (life < 0.0) {
    vec4 defaultPos = texture2D(textureDefaultPosition, uv);
    float spawnAngle = defaultPos.w * 6.28318 + turbineRotation * 3.0;
    float radius = 2.6 + defaultPos.x * 0.6;
    float stageX = -1.2 + defaultPos.y * 2.4;
    position.x = stageX;
    position.y = cos(spawnAngle) * radius;
    position.z = sin(spawnAngle) * radius;
    life = 0.5 + fract(defaultPos.z * 21.4131 + time * 0.12);
  } else {
    vec3 curlForce = curl(position * curlSize * 2.0, time * 0.4, 0.35);
    vec3 windForce = vec3(0.08 * speed, 0.0, 0.0);
    
    float radialDist = length(vec2(position.y, position.z));
    if (radialDist > 0.1) {
      vec2 radialDir = normalize(vec2(position.y, position.z));
      float swirlStrength = 0.08 * speed * (1.0 - smoothstep(2.5, 6.0, radialDist));
      windForce.y += -radialDir.y * swirlStrength;
      windForce.z += radialDir.x * swirlStrength;
      
      float expandRate = 0.012 * speed * smoothstep(0.0, 3.0, position.x);
      windForce.y += radialDir.x * expandRate;
      windForce.z += radialDir.y * expandRate;
    }
    
    position += windForce;
    position += curlForce * speed * 0.15;
    
    if (position.x > 12.0) {
      life -= dieSpeed * 2.0;
    }
  }
  
  gl_FragColor = vec4(position, life);
}
`;
    
    const positionVariable = gpuCompute.addVariable('texturePosition', positionFragmentShader, dtPosition);
    gpuCompute.setVariableDependencies(positionVariable, [positionVariable]);
    
    positionVariable.material.uniforms.textureDefaultPosition = { value: dtDefaultPosition };
    positionVariable.material.uniforms.time = { value: 0 };
    positionVariable.material.uniforms.speed = { value: 1.0 };
    positionVariable.material.uniforms.dieSpeed = { value: 0.008 };
    positionVariable.material.uniforms.curlSize = { value: 0.15 };
    positionVariable.material.uniforms.turbineRotation = { value: 0 };
    
    gpuCompute.init();
    
    const geometry = new THREE.BufferGeometry();
    const positions = new Float32Array(PARTICLE_COUNT * PARTICLE_COUNT * 3);
    
    for (let i = 0; i < PARTICLE_COUNT; i++) {
      for (let j = 0; j < PARTICLE_COUNT; j++) {
        const idx = (i * PARTICLE_COUNT + j) * 3;
        positions[idx] = j / PARTICLE_COUNT;
        positions[idx + 1] = i / PARTICLE_COUNT;
        positions[idx + 2] = 0;
      }
    }
    
    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    
    const particleVertexShader = `
      uniform sampler2D texturePosition;
      varying float vLife;
      varying vec3 vPosition;
      
      void main() {
        vec4 positionInfo = texture2D(texturePosition, position.xy);
        vec4 worldPosition = modelMatrix * vec4(positionInfo.xyz, 1.0);
        vec4 mvPosition = viewMatrix * worldPosition;
        
        vLife = positionInfo.w;
        vPosition = positionInfo.xyz;
        
        float size = smoothstep(0.0, 0.2, positionInfo.w) * smoothstep(1.0, 0.5, positionInfo.w);
        gl_PointSize = 80.0 / length(mvPosition.xyz) * size;
        
        gl_Position = projectionMatrix * mvPosition;
      }
    `;
    
    const particleFragmentShader = `
      varying float vLife;
      varying vec3 vPosition;
      
      uniform vec3 color1;
      uniform vec3 color2;
      uniform vec3 color3;
      
      void main() {
        vec2 center = gl_PointCoord - vec2(0.5);
        float dist = length(center);
        if (dist > 0.5) discard;
        
        float alpha = smoothstep(0.5, 0.1, dist) * smoothstep(0.0, 0.15, vLife) * smoothstep(1.0, 0.6, vLife);
        
        float t = smoothstep(1.5, 8.0, vPosition.x);
        vec3 color = mix(color1, color2, t * 0.7);
        color = mix(color, color3, t);
        
        gl_FragColor = vec4(color, alpha * 0.5);
      }
    `;
    
    const material = new THREE.ShaderMaterial({
      uniforms: {
        texturePosition: { value: null },
        color1: { value: new THREE.Color(0x3377aa) },
        color2: { value: new THREE.Color(0x2a6688) },
        color3: { value: new THREE.Color(0x1f4466) },
      },
      vertexShader: particleVertexShader,
      fragmentShader: particleFragmentShader,
      transparent: true,
      blending: THREE.AdditiveBlending,
      depthWrite: false,
    });
    
    const particles = new THREE.Points(geometry, material);
    scene.add(particles);
    
    let turbineRotation = 0;
    const clock = new THREE.Clock();
    
    let targetRotationY = 0;
    let targetRotationZ = 0;
    let currentRotationY = 0;
    let currentRotationZ = 0;
    const baseRotationY = Math.PI;
    let isMouseOverTurbine = false;
    
    document.addEventListener('mousemove', (event) => {
      const rect = container.getBoundingClientRect();
      const isOver = event.clientX >= rect.left && event.clientX <= rect.right &&
                     event.clientY >= rect.top && event.clientY <= rect.bottom;
      
      if (isOver) {
        isMouseOverTurbine = true;
        const mouseX = ((event.clientX - rect.left) / rect.width) * 2 - 1;
        const mouseY = ((event.clientY - rect.top) / rect.height) * 2 - 1;
        targetRotationY = mouseX * 0.25;
        targetRotationZ = -mouseY * 0.15;
      } else if (isMouseOverTurbine) {
        isMouseOverTurbine = false;
        targetRotationY = 0;
        targetRotationZ = 0;
      }
    });
    
    function animate() {
      requestAnimationFrame(animate);
      
      const elapsed = clock.getElapsedTime();
      
      scene.traverse((obj) => {
        if (obj.userData && obj.userData.isRotatingStage) {
          if (obj.userData.stageIndex === 1) {
            obj.rotation.x -= 0.035;
          } else {
            obj.rotation.x += 0.035;
          }
        }
      });
      turbineRotation += 0.035;
      shaftGroup.rotation.x += 0.035;
      
      currentRotationY += (targetRotationY - currentRotationY) * 0.08;
      currentRotationZ += (targetRotationZ - currentRotationZ) * 0.08;
      scene.rotation.y = baseRotationY + currentRotationY;
      scene.rotation.z = currentRotationZ;
      
      positionVariable.material.uniforms.time.value = elapsed;
      positionVariable.material.uniforms.turbineRotation.value = turbineRotation;
      
      gpuCompute.compute();
      
      material.uniforms.texturePosition.value = gpuCompute.getCurrentRenderTarget(positionVariable).texture;
      
      keyLight.intensity = 1.4 + Math.sin(elapsed * 1.5) * 0.1;
      
      controls.update();
      renderer.render(scene, camera);
    }
    
    animate();
    
    const resizeObserver = new ResizeObserver(() => {
      const newWidth = container.clientWidth;
      const newHeight = container.clientHeight;
      camera.aspect = newWidth / newHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(newWidth, newHeight);
      scene.position.x = newWidth < 400 ? 4 - 0.75 : 4;
    });
    resizeObserver.observe(container);
  }

  document.addEventListener('astro:page-load', () => {
    animateStats();
    initCalculator();
    init3DTurbine();
  });
  document.addEventListener('DOMContentLoaded', () => {
    animateStats();
    initCalculator();
    init3DTurbine();
  });
</script>

<style>
  /* Hero Section */
  .hero {
    background: linear-gradient(59deg, rgba(42, 45, 46, 0.70) 0%, rgba(0, 0, 0, 0.40) 31.59%, rgba(42, 45, 46, 0.70) 100%), 
                url('/img/condensers/majer.webp') center/cover no-repeat;
    border-radius: var(--radius-xl);
    padding: var(--space-16) var(--space-8);
    margin-bottom: var(--space-12);
    min-height: 400px;
    display: flex;
    align-items: center;
  }

  .hero-content {
    max-width: 700px;
    color: var(--color-white);
  }

  .hero h1 {
    font-size: clamp(32px, 5vw, 48px);
    color: var(--color-white);
    margin-bottom: var(--space-4);
    letter-spacing: -1px;
    line-height: 1.2;
  }

  .hero p {
    font-size: var(--text-lg);
    opacity: 0.9;
    line-height: 1.6;
    max-width: 600px;
    margin-bottom: var(--space-6);
  }

  .hero-buttons {
    display: flex;
    gap: var(--space-4);
    flex-wrap: wrap;
  }

  /* Section Common Styles */
  .section {
    margin-bottom: var(--space-16);
  }

  .section-header {
    margin-bottom: var(--space-8);
  }

  .section-header h2 {
    font-size: var(--text-3xl);
    color: var(--color-primary);
    margin-bottom: var(--space-3);
  }

  .section-header p {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    max-width: 700px;
  }

  /* About Section - Like Turbines Page */
  .about-turbines .about-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-8);
    align-items: start;
  }

  .about-text {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }

  .about-text p {
    font-size: var(--text-base);
    line-height: 1.7;
    color: var(--color-text-muted);
  }

  .about-text strong {
    color: var(--color-primary);
  }

  .about-image {
    border-radius: var(--radius-xl);
    overflow: hidden;
    height: 100%;
    min-height: 400px;
  }

  .about-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .about-image:hover img {
    transform: scale(1.03);
  }

  .features-list {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .features-list li {
    padding-left: var(--space-6);
    position: relative;
    color: var(--color-text-muted);
    line-height: 1.6;
  }

  .features-list li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 8px;
    width: 8px;
    height: 8px;
    background: var(--color-accent);
    border-radius: 50%;
  }

  /* Modifications Section - Like Oil Coolers */
  .modifications-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-4);
  }

  .modification-card {
    background: var(--color-white);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-5);
    transition: all 0.3s ease;
  }

  .modification-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--color-accent);
  }

  .modification-header h3 {
    font-size: var(--text-lg);
    color: var(--color-primary);
    margin-bottom: var(--space-3);
    font-weight: 700;
  }

  .modification-description {
    color: var(--color-text-muted);
    font-size: var(--text-sm);
    line-height: 1.6;
  }

  /* Additional Services Style - For Technical Advantages */
  .additional-services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-4);
  }

  .additional-service-card {
    background: var(--color-bg-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-5);
    transition: all var(--transition-base);
  }

  .additional-service-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    background: var(--color-white);
  }

  .additional-service-header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-3);
  }

  .additional-service-icon {
    width: 40px;
    height: 40px;
    flex-shrink: 0;
  }

  .additional-service-icon img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  .additional-service-card h3 {
    font-size: var(--text-lg);
    font-weight: 700;
    line-height: 1.3;
  }

  .additional-service-card p {
    color: var(--color-text-muted);
    font-size: var(--text-sm);
    line-height: 1.5;
  }

  /* Technical Features Section with 3D Turbine */
  .tech-features-infographic {
    position: relative;
    min-height: 600px;
    overflow: hidden;
    border-radius: var(--radius-xl);
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  }

  .turbine-3d-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
  }

  .tech-features-content {
    position: relative;
    z-index: 2;
    padding: var(--space-8);
  }

  .tech-features-cards {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    max-width: 420px;
  }

  @keyframes windSway {
    0%, 100% { transform: translateX(0) rotate(0deg); }
    25% { transform: translateX(-3px) rotate(-0.3deg); }
    50% { transform: translateX(-5px) rotate(-0.5deg); }
    75% { transform: translateX(-2px) rotate(-0.2deg); }
  }

  .infographic-card {
    background: rgba(255, 255, 255, 0.92);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.5);
    border-radius: var(--radius-xl);
    padding: var(--space-5);
    position: relative;
    transition: box-shadow 0.4s ease, border-color 0.4s ease;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    animation: windSway 3s ease-in-out infinite;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
  }

  .infographic-card:nth-child(1) { animation-delay: 0s; }
  .infographic-card:nth-child(2) { animation-delay: 0.4s; }
  .infographic-card:nth-child(3) { animation-delay: 0.8s; }
  .infographic-card:nth-child(4) { animation-delay: 1.2s; }

  .infographic-card:hover {
    animation-play-state: paused;
    transform: translateX(-5px) rotate(-0.3deg);
    box-shadow: 0 20px 40px rgba(163, 218, 243, 0.2), 0 10px 20px rgba(0, 0, 0, 0.1);
    border-color: var(--color-accent);
  }

  .card-icon {
    width: 44px;
    height: 44px;
    color: var(--color-primary);
    margin-bottom: var(--space-3);
    transition: all 0.3s ease;
  }

  .card-icon svg {
    width: 100%;
    height: 100%;
  }

  .infographic-card:hover .card-icon {
    color: var(--color-accent);
    transform: scale(1.1);
  }

  .infographic-card h3 {
    font-size: var(--text-md);
    font-weight: 700;
    color: var(--color-primary);
    margin-bottom: var(--space-2);
  }

  .infographic-card p {
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    line-height: 1.5;
    margin: 0;
  }

  /* Calculator Section */
  .calculator-section {
    position: relative;
    border-radius: var(--radius-xl);
    padding: var(--space-10);
    overflow: hidden;
    background: linear-gradient(145deg, 
      rgba(255,255,255,0.9) 0%, 
      rgba(250,250,250,0.85) 50%, 
      rgba(245,245,245,0.8) 100%
    );
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 
      0 8px 32px rgba(0,0,0,0.08),
      0 0 0 1px rgba(255,255,255,0.5),
      inset 0 1px 0 rgba(255,255,255,0.6);
    border: 1px solid rgba(255,255,255,0.3);
  }

  .calculator-wrapper {
    position: relative;
    z-index: 2;
  }

  .calculator-header {
    margin-bottom: var(--space-8);
  }

  .calculator-title h2 {
    font-size: var(--text-3xl);
    color: var(--color-primary);
    margin-bottom: var(--space-1);
    font-weight: 700;
  }

  .calculator-title p {
    color: var(--color-text-muted);
    font-size: var(--text-base);
  }

  .description-content {
    margin-bottom: var(--space-6);
  }

  .description-content h4 {
    font-size: var(--text-xl);
    color: var(--color-primary);
    margin-bottom: var(--space-4);
    font-weight: 700;
  }

  .calc-features {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .calc-features li {
    position: relative;
    padding-left: var(--space-5);
    font-size: var(--text-base);
    color: var(--color-text);
    line-height: 1.6;
  }

  .calc-features li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 10px;
    width: 6px;
    height: 6px;
    background: var(--color-primary);
    border-radius: 50%;
  }

  .calc-features li strong {
    color: var(--color-primary);
  }

  .description-note {
    padding: var(--space-4);
  }

  .description-note h4 {
    font-size: var(--text-lg);
    color: var(--color-primary);
    margin-bottom: var(--space-3);
    font-weight: 700;
  }

  .description-note p {
    font-size: var(--text-base);
    color: var(--color-text-muted);
    line-height: 1.7;
  }

  .calculator-body {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-8);
    align-items: start;
  }

  .calculator-left {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }

  .calc-section-title {
    font-size: var(--text-lg);
    color: var(--color-primary);
    font-weight: 700;
    margin-bottom: var(--space-2);
  }

  .calculator-right {
    display: flex;
    flex-direction: column;
  }

  .form-icon-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-3);
    width: 100%;
  }

  .form-group-modern {
    background: var(--color-white);
    border: 1px solid var(--color-border);
    border-radius: 50px;
    padding: var(--space-3) var(--space-5);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: var(--space-3);
  }

  .form-group-modern:hover,
  .form-group-modern:focus-within {
    border-color: var(--color-accent);
  }

  .input-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    gap: var(--space-3);
  }

  .input-wrapper label {
    font-size: var(--text-base);
    color: var(--color-text-muted);
    white-space: nowrap;
  }

  .input-with-unit {
    display: flex;
    align-items: center;
    gap: var(--space-2);
  }

  .input-with-unit input {
    background: transparent;
    border: none;
    color: var(--color-primary);
    font-size: var(--text-lg);
    font-weight: 700;
    padding: 0;
    width: 60px;
    text-align: right;
    -moz-appearance: textfield;
  }

  .input-with-unit input::-webkit-outer-spin-button,
  .input-with-unit input::-webkit-inner-spin-button {
    -webkit-appearance: inner-spin-button;
    opacity: 1;
    margin-left: var(--space-2);
  }

  .input-with-unit input::placeholder {
    color: var(--color-text-muted);
  }

  .input-with-unit input:focus {
    outline: none;
  }

  .input-with-unit .unit {
    color: var(--color-text-muted);
    font-size: var(--text-base);
  }

  .input-wrapper select {
    background: transparent;
    border: none;
    color: var(--color-primary);
    font-size: var(--text-lg);
    font-weight: 700;
    padding: 0;
    cursor: pointer;
    text-align: right;
    direction: rtl;
  }

  .input-wrapper select:focus {
    outline: none;
  }

  .input-wrapper select option {
    background: var(--color-white);
    color: var(--color-primary);
    direction: ltr;
  }

  .calculator-form-card {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    align-items: center;
  }

  .calculate-btn-modern {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-6);
    border-radius: var(--radius-full);
    background: linear-gradient(135deg, 
      rgba(2, 132, 199, 0.95) 0%, 
      rgba(14, 165, 233, 0.9) 50%,
      rgba(56, 189, 248, 0.9) 100%);
    color: white;
    font-weight: 700;
    font-size: var(--text-base);
    border: 1px solid rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: all 0.4s ease;
    font-family: inherit;
    box-shadow: 
      0 4px 20px rgba(14, 165, 233, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
    position: relative;
    overflow: hidden;
    margin-top: var(--space-2);
  }

  .calculate-btn-modern::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent 0%,
      rgba(255, 255, 255, 0.3) 50%,
      transparent 100%);
    transition: left 0.5s ease;
  }

  .calculate-btn-modern:hover::before {
    left: 100%;
  }

  .calculate-btn-modern:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, 
      rgba(3, 105, 161, 0.95) 0%, 
      rgba(2, 132, 199, 0.95) 50%,
      rgba(14, 165, 233, 0.95) 100%);
    box-shadow: 
      0 8px 32px rgba(14, 165, 233, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.5);
  }

  .calculator-results-card {
    display: flex;
    flex-direction: column;
    transition: all 0.4s ease;
  }

  .calculator-results-card.active .result-card-value {
    color: var(--color-primary);
  }

  .results-header {
    margin-bottom: var(--space-3);
  }

  .results-header h4 {
    color: var(--color-primary);
    font-size: var(--text-lg);
    font-weight: 700;
  }

  .results-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-3);
  }

  .result-card {
    background: var(--color-white);
    border: 1px solid var(--color-border);
    border-radius: 50px;
    padding: var(--space-3) var(--space-5);
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: var(--space-3);
    transition: all 0.3s ease;
  }

  .result-card:hover {
    border-color: var(--color-accent);
  }

  .result-card-label {
    font-size: var(--text-base);
    color: var(--color-text-muted);
    white-space: nowrap;
  }

  .result-card-value {
    font-size: var(--text-lg);
    font-weight: 700;
    color: var(--color-primary);
  }

  .calculator-note {
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    text-align: left;
    margin-top: var(--space-4);
    font-style: italic;
  }

  /* Delivery Section */
  .delivery-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-6);
  }

  .delivery-card {
    position: relative;
    border-radius: var(--radius-xl);
    overflow: hidden;
    min-height: 350px;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    transition: all 0.3s ease;
  }

  .delivery-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-xl);
  }

  .delivery-card:hover .delivery-bg-image {
    transform: scale(1.05);
  }

  .delivery-card:hover .delivery-description {
    opacity: 1;
    transform: translateY(0);
  }

  .delivery-card:hover .delivery-title-wrapper {
    transform: translateY(0);
  }

  .delivery-card:hover .delivery-tags {
    opacity: 1;
    transform: translateY(0);
  }

  .delivery-bg-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
    transition: transform 0.4s ease;
  }

  .delivery-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 2;
    padding: var(--space-6);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
  }

  .delivery-title-wrapper {
    display: inline-flex;
    align-self: flex-start;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 50px;
    padding: var(--space-3) var(--space-5);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    transition: transform 0.4s ease;
    transform: translateY(80px);
  }

  .delivery-card h3 {
    font-size: var(--text-xl);
    color: var(--color-white);
    margin: 0;
    font-weight: 700;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .delivery-description {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 24px;
    padding: var(--space-4) var(--space-5);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }

  .delivery-card p {
    font-size: var(--text-base);
    color: var(--color-white);
    line-height: 1.6;
    margin: 0;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }

  .delivery-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }

  .tag {
    background: rgba(255, 255, 255, 0.15);
    color: var(--color-white);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    font-weight: 500;
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    white-space: nowrap;
  }

  /* Stats Section */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-4);
    background: var(--color-white);
    border-radius: var(--radius-xl);
    padding: var(--space-8);
    border: 1px solid var(--color-border);
  }

  .stat-card {
    text-align: center;
    padding: var(--space-4);
    border-right: 1px solid var(--color-border);
  }

  .stat-card:last-child {
    border-right: none;
  }

  .stat-value {
    font-size: var(--text-4xl);
    font-weight: 700;
    margin-bottom: var(--space-2);
    color: var(--color-primary);
  }

  .stat-label {
    font-size: var(--text-base);
    color: var(--color-text-muted);
  }

  /* Work Advantages Section */
  .work-advantages-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-6);
  }

  .work-advantage-card {
    background: var(--color-white);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    transition: all 0.3s ease;
  }

  .work-advantage-card:hover {
    border-color: var(--color-accent);
    box-shadow: var(--shadow-md);
    transform: translateY(-4px);
  }

  .work-advantage-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--space-4);
  }

  .work-advantage-icon img {
    width: 40px;
    height: 40px;
    object-fit: contain;
  }

  .work-advantage-card h3 {
    font-size: var(--text-lg);
    color: var(--color-primary);
    margin-bottom: var(--space-3);
  }

  .work-advantage-card p {
    color: var(--color-text-muted);
    line-height: 1.6;
    font-size: var(--text-base);
  }

  /* CTA Section */
  .cta-section {
    background: var(--color-bg-card);
    border-radius: var(--radius-xl);
    padding: var(--space-12);
    text-align: center;
  }

  .cta-content {
    max-width: 600px;
    margin: 0 auto;
  }

  .cta-content h2 {
    font-size: var(--text-3xl);
    color: var(--color-primary);
    margin-bottom: var(--space-4);
  }

  .cta-content p {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    margin-bottom: var(--space-8);
    line-height: 1.6;
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .about-turbines .about-content {
      grid-template-columns: 1fr;
    }

    .about-image {
      order: -1;
      min-height: 300px;
    }

    .modifications-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .calculator-body {
      grid-template-columns: 1fr;
    }

    .results-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .delivery-grid {
      grid-template-columns: 1fr;
    }

    .work-advantages-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .stat-card {
      border-right: none;
      border-bottom: 1px solid var(--color-border);
    }
    
    .stat-card:nth-child(3),
    .stat-card:nth-child(4) {
      border-bottom: none;
    }

    .tech-features-infographic {
      min-height: 500px;
    }

    .tech-features-cards {
      max-width: 350px;
    }
  }

  @media (max-width: 768px) {
    .hero {
      padding: var(--space-10) var(--space-5);
      min-height: 350px;
    }

    .modifications-grid,
    .work-advantages-grid {
      grid-template-columns: 1fr;
    }

    .calculator-section {
      padding: var(--space-6);
    }

    .calculator-header {
      flex-direction: column;
      text-align: center;
    }

    .calculator-title h2 {
      font-size: var(--text-2xl);
    }

    .results-grid {
      grid-template-columns: 1fr;
    }

    .cta-section {
      padding: var(--space-8) var(--space-5);
    }

    .tech-features-infographic {
      min-height: 450px;
    }

    .tech-features-cards {
      max-width: 280px;
    }

    .infographic-card {
      padding: var(--space-4);
    }

    .infographic-card h3 {
      font-size: var(--text-sm);
    }

    .infographic-card p {
      font-size: 12px;
    }

    .delivery-grid {
      grid-template-columns: 1fr;
    }

    .delivery-card {
      min-height: 320px;
    }

    .delivery-title-wrapper {
      transform: translateY(0);
    }

    .delivery-description {
      opacity: 1;
      transform: translateY(0);
    }

    .delivery-tags {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

